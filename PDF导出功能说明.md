# PDF导出功能说明

## 功能概述

已成功将原有的"导出HTML教案"功能修改为"导出PDF教案"功能。点击按钮后，系统会自动调用浏览器的打印对话框，您可以将教案保存为PDF文件。

## 使用步骤

1. **填写教案内容**
   - 在封面区域填写学科、年级、班级等基本信息
   - 在教案详情区域填写备课信息、教学过程等内容

2. **点击"导出PDF教案"按钮**
   - 位于封面区域的"AI智能生成教案"按钮旁边
   - 按钮图标为PDF文档图标

3. **在打印对话框中选择"另存为PDF"**
   - Windows系统：目标打印机选择"Microsoft Print to PDF"或"另存为PDF"
   - macOS系统：点击左下角的"PDF"下拉菜单，选择"存储为PDF"
   - Chrome浏览器：目标打印机选择"另存为PDF"

4. **设置PDF参数（可选）**
   - 页面方向：建议选择"纵向"
   - 纸张大小：默认A4
   - 边距：已自动设置为1.5厘米
   - 背景图形：建议勾选以获得更好的视觉效果

5. **保存PDF文件**
   - 选择保存位置
   - 文件名会自动生成，也可以自定义
   - 点击"保存"按钮完成

## 技术实现

### 主要修改内容

1. **HTML文件 (index.html)**
   - 将按钮ID从 `export-html-btn` 改为 `export-pdf-btn`
   - 将按钮文字从"导出HTML教案"改为"导出PDF教案"
   - 将图标从下载图标改为PDF文件图标

2. **JavaScript文件 (script.js)**
   - 创建新函数 `exportLessonPlanToPDF()`
   - 使用隐藏的iframe加载教案内容
   - 调用浏览器原生的 `window.print()` 功能
   - 添加打印专用CSS样式以优化PDF输出效果

3. **打印样式优化**
   ```css
   @media print {
     - 移除背景色和阴影
     - 优化页边距
     - 设置分页规则，避免内容被截断
     - 设置A4纸张大小
   }
   ```

## 优势

1. **无需额外依赖**：使用浏览器原生功能，无需引入第三方库
2. **兼容性好**：支持所有现代浏览器（Chrome、Edge、Firefox、Safari等）
3. **文件质量高**：保持原有的排版和样式
4. **操作简单**：一键导出，用户体验流畅
5. **灵活性强**：用户可以在打印对话框中自定义各种参数

## 浏览器兼容性

- ✅ Google Chrome 60+
- ✅ Microsoft Edge 79+
- ✅ Firefox 55+
- ✅ Safari 11+
- ✅ Opera 47+

## 注意事项

1. 首次使用时，浏览器可能会弹出打印权限请求，请点击"允许"
2. 如果打印对话框没有弹出，请检查浏览器是否阻止了弹出窗口
3. PDF的最终效果取决于浏览器的打印引擎，不同浏览器可能略有差异
4. 建议使用Chrome或Edge浏览器以获得最佳效果

## 问题排查

### 打印对话框没有弹出
- 检查浏览器是否阻止了弹出窗口
- 在浏览器地址栏右侧查看是否有弹窗阻止图标
- 允许该网站的弹窗权限

### PDF样式不正确
- 在打印对话框中勾选"背景图形"选项
- 检查页边距设置是否合适
- 尝试使用不同的浏览器

### 内容被截断
- 在打印对话框中调整缩放比例
- 检查纸张方向是否正确
- 查看打印预览，确认分页位置

## 后续优化建议

如果需要更高级的PDF功能（如自动生成、直接下载等），可以考虑：

1. 使用 `jsPDF` 库实现纯客户端PDF生成
2. 使用 `html2canvas` + `jsPDF` 将页面转换为PDF
3. 集成服务端PDF生成服务（如Puppeteer）

当前的实现方案是最简单、最可靠的解决方案，适合大多数使用场景。

